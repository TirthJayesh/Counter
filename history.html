<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Counter</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style type="text/tailwindcss">
    :root {
      --primary-color: #0d7ff2;
      --background-start-rgb: 243, 244, 246;
      --background-end-rgb: 229, 231, 235;
    }
    body {
      font-family: 'Manrope', sans-serif;
      min-height: max(884px, 100dvh);
    }
    #history-section {
      max-height: 500px;
      opacity: 1;
      transform: translateY(0);
      transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, transform 0.5s ease-in-out, margin-top 0.5s ease-in-out;
      overflow: hidden;
    }
    #history-section.hidden {
      max-height: 0;
      opacity: 0;
      transform: translateY(-1rem);
      margin-top: 0 !important;
    }
    #toast {
      transform: translateY(150%);
      transition: transform 0.5s ease-in-out;
    }
    #toast.show {
      transform: translateY(0);
    }
    #note-dialog {
      transform: translateY(150%);
      transition: transform 0.5s ease-in-out, opacity 0.3s ease-in-out;
      opacity: 0;
      pointer-events: none;
    }
    #note-dialog.show {
      transform: translateY(0);
      opacity: 1;
      pointer-events: auto;
    }
  </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-gray-100">
<div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden bg-gradient-to-br from-[rgb(var(--background-start-rgb))] to-[rgb(var(--background-end-rgb))]">
<header class="flex items-center justify-between p-6">
<h1 class="text-xl font-bold text-gray-800">Counter</h1>
<div class="flex items-center gap-2">
<button class="group flex items-center gap-2 rounded-full bg-white/70 px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:text-gray-900 active:scale-95" id="save-btn">
<svg class="h-5 w-5 text-gray-600 transition-colors group-hover:text-gray-800" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
<polyline points="17 21 17 13 7 13 7 21"></polyline>
<polyline points="7 3 7 8 15 8"></polyline>
</svg>
<span>Save</span>
</button>
<button class="group flex items-center gap-2 rounded-full bg-white/70 px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:text-gray-900 active:scale-95" id="toggle-history">
<svg class="text-gray-600 group-hover:text-gray-800" fill="none" height="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
<path d="M1 4v6h6"></path>
<path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
</svg>
<span>History</span>
</button>
</div>
</header>
<main class="flex flex-grow flex-col items-center justify-center px-4">
<div class="flex flex-col items-center justify-center w-full">
<div class="w-full max-w-sm" id="history-section-container">
<div class="w-full max-w-sm mt-0 overflow-hidden hidden" id="history-section">
<div class="rounded-xl bg-white/50 p-4 backdrop-blur-sm shadow-md">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-bold text-gray-800">History</h3>
<button class="text-sm font-semibold text-red-500 hover:text-red-700 transition-colors" id="clear-history">Clear</button>
</div>
<ul class="space-y-3 max-h-60 overflow-y-auto pr-2" id="history-list">
</ul>
<p class="text-center text-gray-500 text-sm mt-4 hidden" id="no-history">No history yet.</p>
</div>
</div>
</div>
<div class="text-center my-8">
<span class="text-[120px] font-extrabold text-gray-900 tracking-tighter leading-none transition-all duration-300 ease-in-out" id="counter-value">0</span>
</div>
<div class="flex items-center justify-center gap-8 w-full max-w-sm">
<button class="group flex size-20 items-center justify-center rounded-full bg-white/70 shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105 active:scale-95" id="decrement">
<svg class="text-gray-700 transition-colors group-hover:text-gray-900" fill="none" height="32" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg">
<line x1="5" x2="19" y1="12" y2="12"></line>
</svg>
</button>
<button class="group flex size-32 items-center justify-center rounded-full bg-[var(--primary-color)] shadow-lg shadow-blue-500/30 backdrop-blur-sm transition-all duration-300 hover:scale-105 active:scale-95" id="increment">
<svg class="text-white" fill="none" height="56" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" viewBox="0 0 24 24" width="56" xmlns="http://www.w3.org/2000/svg">
<line x1="12" x2="12" y1="5" y2="19"></line>
<line x1="5" x2="19" y1="12" y2="12"></line>
</svg>
</button>
</div>
<div class="mt-8 text-center">
<p class="text-lg font-semibold text-gray-700">Mala</p>
<div class="mt-2 w-32 mx-auto text-center rounded-lg bg-white/70 px-4 py-2 text-2xl font-bold text-gray-900 shadow-sm backdrop-blur-sm" id="mala-counter">0</div>
</div>
</div>
</main>
<footer class="w-full pb-8 pt-4">
<div class="flex justify-center">
<button class="group flex items-center gap-3 rounded-full bg-white/70 px-6 py-3 text-base font-semibold text-gray-700 shadow-sm backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:text-gray-900 active:scale-95" id="reset-btn">
<svg class="h-6 w-6 text-gray-600 transition-transform duration-300 group-hover:text-gray-800 group-hover:rotate-[-45deg]" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
<path d="M12 4v8l4 2"></path>
</svg>
<span>Reset</span>
</button>
</div>
</footer>
</div>
<div class="fixed inset-0 z-50 hidden items-end justify-center bg-black/30 p-4 backdrop-blur-sm sm:items-center" id="confirmation-dialog">
<div class="w-full max-w-sm rounded-xl bg-white/80 p-6 shadow-lg backdrop-blur-lg transition-all duration-300 ease-in-out">
<h2 class="text-lg font-bold text-gray-900">Reset Counter</h2>
<p class="mt-2 text-sm text-gray-600">Are you sure you want to reset the counter? This action cannot be undone.</p>
<div class="mt-6 flex justify-end space-x-3">
<button class="rounded-lg bg-gray-200/80 px-4 py-2 text-sm font-semibold text-gray-800 transition-colors hover:bg-gray-300/80 active:scale-95" id="cancel-reset">Cancel</button>
<button class="rounded-lg bg-red-500 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-red-600 active:scale-95" id="confirm-reset">Reset</button>
</div>
</div>
</div>
<div class="fixed inset-0 z-50 hidden items-end justify-center bg-black/30 p-4 backdrop-blur-sm sm:items-center" id="delete-confirmation-dialog">
<div class="w-full max-w-sm rounded-xl bg-white/80 p-6 shadow-lg backdrop-blur-lg transition-all duration-300 ease-in-out">
<h2 class="text-lg font-bold text-gray-900">Delete Entry</h2>
<p class="mt-2 text-sm text-gray-600">Are you sure you want to permanently delete this history entry?</p>
<div class="mt-6 flex justify-end space-x-3">
<button class="rounded-lg bg-gray-200/80 px-4 py-2 text-sm font-semibold text-gray-800 transition-colors hover:bg-gray-300/80 active:scale-95" id="cancel-delete">Cancel</button>
<button class="rounded-lg bg-red-500 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-red-600 active:scale-95" id="confirm-delete">Delete</button>
</div>
</div>
</div>
<div class="fixed inset-x-0 bottom-0 z-50 p-4" id="note-dialog">
<div class="w-full max-w-sm mx-auto rounded-xl bg-white/80 p-6 shadow-lg backdrop-blur-lg">
<h2 class="text-lg font-bold text-gray-900">Add a Note</h2>
<p class="mt-1 text-sm text-gray-600">Optionally add a note for this count.</p>
<div class="mt-4">
<input class="w-full rounded-lg border-gray-300 bg-white/70 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" id="note-input" placeholder="e.g., Morning push-ups" type="text"/>
</div>
<div class="mt-6 flex justify-end space-x-3">
<button class="rounded-lg bg-gray-200/80 px-4 py-2 text-sm font-semibold text-gray-800 transition-colors hover:bg-gray-300/80 active:scale-95" id="skip-note">Skip</button>
<button class="rounded-lg bg-[var(--primary-color)] px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-600 active:scale-95" id="save-note">Save</button>
</div>
</div>
</div>
<div class="fixed bottom-6 right-6 flex items-center gap-3 rounded-xl bg-gray-900/80 px-4 py-3 text-white shadow-lg backdrop-blur-sm" id="toast">
<svg class="h-6 w-6 text-green-400" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
<polyline points="22 4 12 14.01 9 11.01"></polyline>
</svg>
<span class="text-sm font-semibold">Count saved successfully!</span>
</div>
<script>
    const counterValue = document.getElementById('counter-value');
    const incrementBtn = document.getElementById('increment');
    const decrementBtn = document.getElementById('decrement');
    const resetBtn = document.getElementById('reset-btn');
    const saveBtn = document.getElementById('save-btn');
    const confirmationDialog = document.getElementById('confirmation-dialog');
    const cancelResetBtn = document.getElementById('cancel-reset');
    const confirmResetBtn = document.getElementById('confirm-reset');
    const deleteConfirmationDialog = document.getElementById('delete-confirmation-dialog');
    const cancelDeleteBtn = document.getElementById('cancel-delete');
    const confirmDeleteBtn = document.getElementById('confirm-delete');
    const toggleHistoryBtn = document.getElementById('toggle-history');
    const historySection = document.getElementById('history-section');
    const historyList = document.getElementById('history-list');
    const clearHistoryBtn = document.getElementById('clear-history');
    const noHistoryMsg = document.getElementById('no-history');
    const toast = document.getElementById('toast');
    const noteDialog = document.getElementById('note-dialog');
    const noteInput = document.getElementById('note-input');
    const saveNoteBtn = document.getElementById('save-note');
    const skipNoteBtn = document.getElementById('skip-note');
    const malaCounterEl = document.getElementById('mala-counter');
    let count = 0;
    let malaCount = 0;
    let history = [];
    let toastTimeout;
    let tempCount;
    let itemToDelete = null;
    const updateCounter = () => {
      counterValue.textContent = count;
      malaCounterEl.textContent = malaCount;
    };
    const showToast = () => {
      clearTimeout(toastTimeout);
      toast.classList.add('show');
      toastTimeout = setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    };
    const addToHistory = (newCount, note = '') => {
      const timestamp = new Date().toLocaleTimeString([], {
        hour: '2-digit',
        minute: '2-digit'
      });
      history.unshift({
        id: Date.now(),
        count: newCount,
        timestamp,
        note
      });
      if (history.length > 10) {
        history.pop();
      }
      renderHistory();
    };
    const renderHistory = () => {
      if (history.length === 0) {
        historyList.innerHTML = '';
        noHistoryMsg.classList.remove('hidden');
        return;
      }
      noHistoryMsg.classList.add('hidden');
      historyList.innerHTML = history.map((item, index) =>
        `<li class="flex items-center justify-between p-3 rounded-lg ${index % 2 === 0 ? 'bg-gray-100/50' : 'bg-white/50'} relative group">
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 bg-[var(--primary-color)]/10 text-[var(--primary-color)] rounded-full size-10 flex items-center justify-center font-bold text-lg">
                        ${item.count}
                    </div>
                    <div class="flex-grow">
                        <p class="font-semibold text-gray-800">${item.note || 'Saved Count'}</p>
                        <p class="text-xs text-gray-500">${item.timestamp}</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <button class="p-2 text-gray-600 hover:text-gray-900 rounded-full transition-colors duration-200 hover:bg-gray-200/70 active:scale-95" onclick="editHistoryItem(${item.id})">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                           <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path>
                        </svg>
                    </button>
                    <button class="p-2 text-red-500 hover:text-red-700 rounded-full transition-colors duration-200 hover:bg-red-100/70 active:scale-95" onclick="promptDeleteHistoryItem(${item.id})">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                    </button>
                </div>
            </li>`
      ).join('');
    };
    window.editHistoryItem = (id) => {
      const itemIndex = history.findIndex(item => item.id === id);
      if (itemIndex > -1) {
        const item = history[itemIndex];
        const newNote = prompt('Edit note:', item.note);
        if (newNote !== null) {
          history[itemIndex].note = newNote.trim();
          renderHistory();
        }
      }
    };
    window.promptDeleteHistoryItem = (id) => {
      itemToDelete = id;
      deleteConfirmationDialog.classList.remove('hidden');
      deleteConfirmationDialog.classList.add('flex');
    };
    const deleteHistoryItem = (id) => {
      history = history.filter(item => item.id !== id);
      renderHistory();
    };
    cancelDeleteBtn.addEventListener('click', () => {
      itemToDelete = null;
      deleteConfirmationDialog.classList.add('hidden');
      deleteConfirmationDialog.classList.remove('flex');
    });
    confirmDeleteBtn.addEventListener('click', () => {
      if (itemToDelete !== null) {
        deleteHistoryItem(itemToDelete);
        itemToDelete = null;
        deleteConfirmationDialog.classList.add('hidden');
        deleteConfirmationDialog.classList.remove('flex');
      }
    });
    const showNoteDialog = () => {
      noteDialog.classList.add('show');
    };
    const hideNoteDialog = () => {
      noteDialog.classList.remove('show');
      noteInput.value = '';
    };
    incrementBtn.addEventListener('click', () => {
      count++;
      if (count === 108) {
        count = 0;
        malaCount++;
      }
      updateCounter();
    });
    decrementBtn.addEventListener('click', () => {
      if (count > 0) {
        count--;
        updateCounter();
      }
    });
    saveBtn.addEventListener('click', () => {
      tempCount = count;
      showNoteDialog();
      saveBtn.classList.add('scale-110', 'bg-green-100/80');
      setTimeout(() => {
        saveBtn.classList.remove('scale-110', 'bg-green-100/80');
      }, 300);
    });
    saveNoteBtn.addEventListener('click', () => {
      addToHistory(tempCount, noteInput.value.trim());
      hideNoteDialog();
      showToast();
    });
    skipNoteBtn.addEventListener('click', () => {
      addToHistory(tempCount);
      hideNoteDialog();
      showToast();
    });
    resetBtn.addEventListener('click', () => {
      confirmationDialog.classList.remove('hidden');
      confirmationDialog.classList.add('flex');
    });
    cancelResetBtn.addEventListener('click', () => {
      confirmationDialog.classList.add('hidden');
      confirmationDialog.classList.remove('flex');
    });
    confirmResetBtn.addEventListener('click', () => {
      count = 0;
      malaCount = 0;
      updateCounter();
      addToHistory(count, 'Counter Reset');
      confirmationDialog.classList.add('hidden');
      confirmationDialog.classList.remove('flex');
    });
    toggleHistoryBtn.addEventListener('click', () => {
      historySection.classList.toggle('hidden');
      if (!historySection.classList.contains('hidden')) {
        historySection.style.marginTop = '1.5rem';
      } else {
        historySection.style.marginTop = '0';
      }
    });
    clearHistoryBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to clear all history?')) {
        history = [];
        renderHistory();
      }
    });
    renderHistory();
    updateCounter();
  </script>

</body></html>